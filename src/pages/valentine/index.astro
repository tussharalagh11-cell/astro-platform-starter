<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Valentine Code Invite</title>
    <meta name="theme-color" content="#0a0217" />
    <style>
      :root {
        --bg1: #2b0b3f;
        --bg2: #0a0217;
        --bg3: #04010a;
        --text: #fdf7ff;
        --muted: rgba(255, 255, 255, 0.72);
        --card: rgba(16, 5, 32, 0.72);
        --stroke: rgba(255, 255, 255, 0.12);
        --shadow: rgba(8, 2, 18, 0.55);

        --pink1: #ff7ac8;
        --pink2: #f73c72;
        --blue1: #8ed6ff;
        --blue2: #548bff;

        --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
          "Courier New", monospace;
        --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial,
          "Apple Color Emoji", "Segoe UI Emoji";
      }

      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        color: var(--text);
        background:
          radial-gradient(900px 520px at 50% -10%, rgba(255, 122, 200, 0.25), transparent 55%),
          radial-gradient(800px 540px at 0% 30%, rgba(84, 139, 255, 0.18), transparent 55%),
          radial-gradient(circle at top, var(--bg1) 0%, var(--bg2) 55%, var(--bg3) 100%);
        font-family: var(--sans);
        overflow-x: hidden;
      }

      .valentine {
        min-height: 100vh;
        display: grid;
        place-items: center;
        padding: 36px 18px;
      }

      .card {
        position: relative;
        width: min(720px, 100%);
        padding: clamp(22px, 4vw, 34px);
        border-radius: 28px;
        background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)),
          var(--card);
        border: 1px solid var(--stroke);
        box-shadow: 0 30px 90px var(--shadow);
        text-align: center;
        overflow: hidden;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        transform: translateZ(0);
      }

      /* Soft glow ring */
      .card::before {
        content: "";
        position: absolute;
        inset: -2px;
        border-radius: 30px;
        padding: 2px;
        background: linear-gradient(135deg, rgba(255,122,200,0.45), rgba(84,139,255,0.35), rgba(255,255,255,0.10));
        -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        pointer-events: none;
        opacity: 0.75;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        margin: 0 0 16px;
        padding: 10px 14px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.07);
        border: 1px solid rgba(255, 255, 255, 0.10);
        color: rgba(255, 255, 255, 0.80);
        font-family: var(--mono);
        font-size: 0.86rem;
        letter-spacing: 0.02em;
      }
      .badge .dot {
        width: 8px; height: 8px; border-radius: 50%;
        background: linear-gradient(135deg, var(--pink1), var(--blue2));
        box-shadow: 0 0 12px rgba(255,122,200,0.45);
      }

      h1 {
        margin: 0 0 10px;
        font-size: clamp(1.8rem, 3.4vw, 2.45rem);
        line-height: 1.15;
        letter-spacing: -0.02em;
        font-weight: 800;
      }

      .message {
        margin: 0 auto 22px;
        max-width: 56ch;
        color: var(--muted);
        font-size: 1.02rem;
        line-height: 1.65;
      }

      .couple {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 14px;
        margin: 0 0 22px;
      }

      .avatar {
        width: 68px;
        height: 68px;
        border-radius: 50%;
        display: grid;
        place-items: center;
        font-family: var(--mono);
        font-weight: 800;
        letter-spacing: 0.02em;
        border: 1px solid rgba(255, 255, 255, 0.18);
        box-shadow: 0 14px 30px rgba(0,0,0,0.28);
        position: relative;
        overflow: hidden;
      }
      .avatar::after {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.35), transparent 55%);
        opacity: 0.55;
        pointer-events: none;
      }
      .me {
        background: linear-gradient(135deg, var(--blue1), var(--blue2));
        color: #061a35;
      }
      .you {
        background: linear-gradient(135deg, #ff9ad4, #ff5f9c);
        color: #2a0014;
      }

      .heart {
        width: 34px;
        height: 34px;
        display: grid;
        place-items: center;
        font-size: 1.25rem;
        color: #ff7cbf;
        filter: drop-shadow(0 10px 18px rgba(255,122,200,0.25));
        animation: beat 1.2s ease-in-out infinite;
      }
      @keyframes beat {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.18); }
      }

      .terminal {
        text-align: left;
        border-radius: 18px;
        overflow: hidden;
        border: 1px solid rgba(255,255,255,0.10);
        background: rgba(6, 3, 14, 0.68);
        box-shadow: 0 18px 60px rgba(0,0,0,0.28);
        margin: 0 0 22px;
      }

      .terminal-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px 14px;
        background: rgba(255, 255, 255, 0.04);
        border-bottom: 1px solid rgba(255,255,255,0.08);
      }
      .lights {
        display: inline-flex; gap: 7px;
      }
      .light {
        width: 10px; height: 10px; border-radius: 50%;
      }
      .light.red { background: #ff5f57; }
      .light.yellow { background: #febc2e; }
      .light.green { background: #28c840; }

      .terminal-title {
        margin-left: 8px;
        font-family: var(--mono);
        font-size: 0.8rem;
        color: rgba(255,255,255,0.65);
      }

      pre {
        margin: 0;
        padding: 16px 18px 18px;
        font-family: var(--mono);
        font-size: 0.92rem;
        line-height: 1.65;
        color: #fbdcff;
        white-space: pre-wrap;
      }

      .actions {
        display: flex;
        flex-direction: column;
        gap: 12px;
        align-items: center;
        justify-content: center;
      }

      .btn {
        width: min(360px, 100%);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        padding: 13px 18px;
        border-radius: 999px;
        font-weight: 800;
        letter-spacing: 0.01em;
        text-decoration: none;
        border: 1px solid rgba(255,255,255,0.16);
        cursor: pointer;
        transition: transform 0.18s ease, box-shadow 0.18s ease, filter 0.18s ease;
        user-select: none;
      }

      .btn:focus-visible {
        outline: 3px solid rgba(84,139,255,0.55);
        outline-offset: 3px;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 16px 30px rgba(247, 146, 255, 0.18);
      }
      .btn:active { transform: translateY(0px) scale(0.99); }

      .btn-yes {
        background: linear-gradient(135deg, var(--pink1), var(--pink2));
        color: #16010f;
        border-color: rgba(255, 122, 200, 0.35);
      }

      .btn-no {
        background: rgba(255, 255, 255, 0.06);
        color: rgba(255,255,255,0.88);
      }

      .footer {
        margin: 22px 0 0;
        font-family: var(--mono);
        font-size: 0.86rem;
        color: rgba(255, 255, 255, 0.55);
      }

      /* Floating hearts */
      .hearts {
        position: absolute;
        inset: 0;
        pointer-events: none;
        opacity: 0.9;
      }
      .hearts span {
        position: absolute;
        font-size: 18px;
        color: rgba(255, 133, 194, 0.18);
        animation: floaty var(--dur) ease-in-out infinite;
        filter: blur(0.2px);
      }
      @keyframes floaty {
        0%, 100% { transform: translateY(0) translateX(0) scale(1); opacity: 0.35; }
        50% { transform: translateY(-14px) translateX(6px) scale(1.08); opacity: 0.85; }
      }

      /* Confetti canvas */
      canvas#confetti {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 50;
      }

      /* small screen tweaks */
      @media (min-width: 560px) {
        .actions { flex-direction: row; }
        .btn { width: auto; min-width: 220px; }
      }

      @media (prefers-reduced-motion: reduce) {
        * { animation: none !important; transition: none !important; }
      }
    </style>
  </head>

  <body>
    <canvas id="confetti" aria-hidden="true"></canvas>

    <main class="valentine">
      <section class="card" aria-label="Valentine invitation card">
        <div class="hearts" aria-hidden="true" id="hearts"></div>

        <p class="badge"><span class="dot"></span> git commit -m "be my valentine"</p>

        <h1>Divya, will you be my Valentine?</h1>

        <p class="message">
          From the first hello to every little moment after, you’ve made life brighter.
          If your heart says yes, click below and let’s make this the sweetest merge yet.
        </p>

        <div class="couple" role="img" aria-label="Initials of us both with a heart">
          <div class="avatar me" aria-label="Tusshar">T</div>
          <div class="heart" aria-hidden="true">❤</div>
          <div class="avatar you" aria-label="Divya">D</div>
        </div>

        <div class="terminal" aria-label="Coding message">
          <div class="terminal-header">
            <span class="lights" aria-hidden="true">
              <span class="light red"></span>
              <span class="light yellow"></span>
              <span class="light green"></span>
            </span>
            <span class="terminal-title">valentine.ts</span>
          </div>
          <pre><code id="code"></code></pre>
        </div>

        <div class="actions" aria-label="Response buttons">
          <a class="btn btn-yes" id="yesBtn" href="/valentine/yes">
            Yes, I will <span aria-hidden="true">♥</span>
          </a>
          <a class="btn btn-no" id="noBtn" href="/valentine/no">
            No, not this time
          </a>
        </div>

        <p class="footer">P.S. This request expires after one heartbeat.</p>
      </section>
    </main>

    <script>
      // CONFIG
      const yesLink = "/valentine/yes";
      const noLink = "/valentine/no";
      const codeSnippet =
`const us = {
  me: "T",
  you: "Divya",
  status: "hopelessly into you",
  question: "Divya, will you be my Valentine?",
  foreverPlan: ["cute dates", "inside jokes", "soft kisses"]
};

export const answer: "yes" | "no" = "yes";`;

      // Wire links + code
      const yesBtn = document.getElementById("yesBtn");
      const noBtn = document.getElementById("noBtn");
      const codeEl = document.getElementById("code");

      yesBtn.setAttribute("href", yesLink);
      noBtn.setAttribute("href", noLink);
      codeEl.textContent = codeSnippet;

      // Generate floating hearts
      const hearts = document.getElementById("hearts");
      const heartChars = ["❤", "♥", "♡"];
      for (let i = 0; i < 10; i++) {
        const s = document.createElement("span");
        s.textContent = heartChars[i % heartChars.length];
        s.style.left = Math.random() * 100 + "%";
        s.style.top = Math.random() * 100 + "%";
        s.style.setProperty("--dur", (4.6 + Math.random() * 3.5) + "s");
        s.style.fontSize = (14 + Math.random() * 16) + "px";
        hearts.appendChild(s);
      }

      // Confetti (tiny, lightweight)
      const canvas = document.getElementById("confetti");
      const ctx = canvas.getContext("2d");
      let W, H, pieces = [], anim = null;

      function resize() {
        W = canvas.width = window.innerWidth * devicePixelRatio;
        H = canvas.height = window.innerHeight * devicePixelRatio;
      }
      window.addEventListener("resize", resize);
      resize();

      function burst() {
        pieces = [];
        const count = 180;
        for (let i = 0; i < count; i++) {
          pieces.push({
            x: W * 0.5,
            y: H * 0.35,
            vx: (Math.random() - 0.5) * 16,
            vy: (Math.random() - 1.2) * 16,
            g: 0.35 + Math.random() * 0.12,
            r: 2 + Math.random() * 4,
            a: 1,
            spin: (Math.random() - 0.5) * 0.3,
          });
        }
        if (anim) cancelAnimationFrame(anim);
        tick();
      }

      function tick() {
        ctx.clearRect(0, 0, W, H);
        let alive = 0;

        for (const p of pieces) {
          p.vy += p.g;
          p.x += p.vx;
          p.y += p.vy;
          p.a *= 0.987;

          if (p.a > 0.05 && p.y < H + 40) alive++;

          ctx.save();
          ctx.globalAlpha = p.a;
          ctx.translate(p.x, p.y);
          ctx.rotate(p.spin);
          // no fixed colors; use hue based on index-like randomness
          ctx.fillStyle = `hsl(${Math.floor(Math.random() * 360)}, 90%, 70%)`;
          ctx.fillRect(-p.r, -p.r, p.r * 2.2, p.r * 1.6);
          ctx.restore();
        }

        if (alive > 0) anim = requestAnimationFrame(tick);
        else ctx.clearRect(0, 0, W, H);
      }

      // Add sparkle on YES click, then continue navigation
      yesBtn.addEventListener("click", (e) => {
        // allow normal navigation but show animation first
        e.preventDefault();
        burst();
        yesBtn.style.filter = "brightness(1.08)";
        setTimeout(() => {
          window.location.href = yesLink;
        }, 650);
      });

      // Gentle no: no guilt, just soft
      noBtn.addEventListener("click", (e) => {
        // still navigate, but add a tiny feedback animation
        noBtn.style.transform = "translateY(0px) scale(0.98)";
        setTimeout(() => (noBtn.style.transform = ""), 140);
      });
    </script>
  </body>
</html>
