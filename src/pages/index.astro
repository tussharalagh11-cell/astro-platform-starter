---
const yesLink = "/valentine/yes";
const herName = "Divya";
const myInitial = "T";
const herInitial = "D";
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Be My Valentine üíñ</title>
    <meta name="theme-color" content="#0a0217" />

    <style>
      :root{
        --bg1:#2b0b3f; --bg2:#0a0217; --bg3:#04010a;
        --text:#fdf7ff;
        --muted:rgba(255,255,255,.78);
        --card:rgba(16,5,32,.72);
        --stroke:rgba(255,255,255,.12);
        --shadow:rgba(8,2,18,.55);

        --pink1:#ff7ac8; --pink2:#f73c72;
        --blue1:#8ed6ff; --blue2:#548bff;

        --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      }

      *{box-sizing:border-box}
      html,body{height:100%}
      body{
        margin:0;
        color:var(--text);
        font-family:var(--sans);
        overflow-x:hidden;
        background:
          radial-gradient(900px 520px at 50% -10%, rgba(255,122,200,0.22), transparent 55%),
          radial-gradient(800px 540px at 0% 30%, rgba(84,139,255,0.16), transparent 55%),
          radial-gradient(circle at top, var(--bg1) 0%, var(--bg2) 55%, var(--bg3) 100%);
      }

      /* fireworks canvas */
      #fw{position:fixed; inset:0; pointer-events:none; z-index:9999;}

      /* floating hearts background */
      .hearts{position:fixed; inset:0; pointer-events:none; z-index:1; opacity:.9;}
      .hearts span{
        position:absolute; left:var(--x); top:var(--y);
        font-size:var(--s);
        color:rgba(255,122,200,.22);
        animation:drift var(--d) ease-in-out infinite;
        filter:blur(.2px);
      }
      @keyframes drift{
        0%,100%{transform:translateY(0) translateX(0) scale(1);opacity:.25}
        50%{transform:translateY(-18px) translateX(10px) scale(1.08);opacity:.85}
      }

      .wrap{
        min-height:100vh;
        display:grid;
        place-items:center;
        padding:34px 18px;
        position:relative;
        z-index:2;
      }

      .card{
        position:relative;
        width:min(780px,100%);
        padding:clamp(22px,4vw,34px);
        border-radius:28px;
        background:
          linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)),
          var(--card);
        border:1px solid var(--stroke);
        box-shadow:0 30px 90px var(--shadow);
        overflow:hidden;
        text-align:center;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        isolation:isolate;
      }

      /* shimmer sweep */
      .card::after{
        content:"";
        position:absolute;
        inset:-40%;
        background: linear-gradient(115deg,
          transparent 40%,
          rgba(255,255,255,0.08) 50%,
          transparent 60%);
        transform: translateX(-35%) rotate(10deg);
        animation: shimmer 6.5s ease-in-out infinite;
        pointer-events:none;
        z-index:-1;
        opacity:.55;
      }
      @keyframes shimmer{
        0%,100%{transform:translateX(-40%) rotate(10deg); opacity:.25}
        50%{transform:translateX(40%) rotate(10deg); opacity:.65}
      }

      /* glow ring */
      .card::before{
        content:"";
        position:absolute;
        inset:-2px;
        border-radius:30px;
        padding:2px;
        background:linear-gradient(135deg, rgba(255,122,200,0.45), rgba(84,139,255,0.30), rgba(255,255,255,0.08));
        -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
        -webkit-mask-composite:xor;
        mask-composite:exclude;
        pointer-events:none;
        opacity:.75;
      }

      .top-emojis{
        display:flex; justify-content:center; gap:10px;
        font-size:1.1rem; margin-bottom:10px; opacity:.92;
      }

      .mini{
        display:inline-flex; align-items:center; gap:10px;
        margin:0 0 16px;
        padding:10px 14px;
        border-radius:999px;
        background:rgba(255,255,255,.08);
        border:1px solid rgba(255,255,255,.12);
        color:rgba(255,255,255,.86);
        font-size:.95rem;
      }
      .mini .dot{
        width:8px;height:8px;border-radius:50%;
        background:linear-gradient(135deg,var(--pink1),var(--blue2));
        box-shadow:0 0 12px rgba(255,122,200,.45);
      }

      h1{
        margin:0 0 10px;
        font-size:clamp(2.05rem,3.8vw,2.75rem);
        line-height:1.12;
        letter-spacing:-.02em;
        font-weight:950;
        text-shadow: 0 0 22px rgba(255,122,200,0.16);
        animation: titleGlow 3.2s ease-in-out infinite;
      }
      @keyframes titleGlow{
        0%,100%{filter: drop-shadow(0 0 0 rgba(255,122,200,0));}
        50%{filter: drop-shadow(0 0 18px rgba(255,122,200,0.35));}
      }

      .msg{
        margin:0 auto 18px;
        max-width:62ch;
        color:var(--muted);
        font-size:1.05rem;
        line-height:1.75;
      }

      .couple{
        display:flex; align-items:center; justify-content:center;
        gap:14px; margin: 18px 0 12px;
      }
      .avatar{
        width:70px;height:70px;border-radius:50%;
        display:grid;place-items:center;
        font-weight:900;
        border:1px solid rgba(255,255,255,.18);
        box-shadow:0 14px 30px rgba(0,0,0,.28);
        position:relative; overflow:hidden;
      }
      .avatar::after{
        content:"";
        position:absolute; inset:0;
        background:radial-gradient(circle at 30% 20%, rgba(255,255,255,.35), transparent 55%);
        opacity:.55; pointer-events:none;
      }
      .me{background:linear-gradient(135deg,var(--blue1),var(--blue2));color:#061a35}
      .you{background:linear-gradient(135deg,#ff9ad4,#ff5f9c);color:#2a0014}

      .heart{
        width:34px;height:34px;
        display:grid;place-items:center;
        font-size:1.3rem;
        color:#ff7cbf;
        filter:drop-shadow(0 10px 18px rgba(255,122,200,.25));
        animation:beat 1.2s ease-in-out infinite;
      }
      @keyframes beat{0%,100%{transform:scale(1)}50%{transform:scale(1.18)}}

      .teddy-row{
        display:flex; justify-content:center; align-items:center;
        gap:10px; margin: 0 0 8px;
        font-size:1.1rem; opacity:.95;
      }

      /* Hug pop-up */
      .hug{
        display:flex; align-items:center; justify-content:center; gap:10px;
        margin: 6px 0 10px;
        height:0; opacity:0;
        transform: translateY(10px) scale(.98);
        transition: height .25s ease, opacity .25s ease, transform .25s ease;
        pointer-events:none; user-select:none;
      }
      .hug.show{height:44px; opacity:1; transform: translateY(0) scale(1);}
      .hug .bear{font-size:1.7rem; animation: bearBounce 1.1s ease-in-out infinite;}
      .hug .heart2{font-size:1.25rem; animation: hugBeat .9s ease-in-out infinite;}
      .hug .spark{font-size:1.05rem; animation: twinkle .8s ease-in-out infinite;}
      @keyframes bearBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
      @keyframes hugBeat{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}
      @keyframes twinkle{0%,100%{transform:rotate(0) scale(1);opacity:.75}50%{transform:rotate(10deg) scale(1.15);opacity:1}}

      .actions{
        display:flex; gap:12px; justify-content:center; flex-wrap:wrap;
        margin-top:14px;
        position:relative;
        z-index:5;
      }
      .btn{
        border-radius:999px;
        padding:13px 20px;
        font-weight:950;
        letter-spacing:.01em;
        border:1px solid rgba(255,255,255,.16);
        background:rgba(255,255,255,.06);
        color:rgba(255,255,255,.92);
        text-decoration:none;
        cursor:pointer;
        user-select:none;
        transition:transform .18s ease, box-shadow .18s ease, filter .18s ease;
        min-width:230px;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        gap:10px;
      }
      .btn:hover{transform:translateY(-2px); box-shadow:0 16px 30px rgba(247,146,255,.16)}
      .btn:active{transform:translateY(0) scale(.99)}

      .btn-yes{
        background:linear-gradient(135deg,var(--pink1),var(--pink2));
        color:#16010f;
        border-color:rgba(255,122,200,.35);
      }

      /* NO: darker + unclickable + floating */
      .btn-no{
        position:absolute; /* we will animate it */
        left: 12px;
        top: 12px;
        background: rgba(0,0,0,0.38);
        border: 1px solid rgba(255,255,255,0.10);
        color: rgba(255,255,255,0.50);
        box-shadow: inset 0 0 0 1px rgba(0,0,0,0.30);
        opacity: .96;
        pointer-events:none; /* cannot click */
        filter: saturate(0.85);
        min-width: 230px;
      }

      .foot{
        margin:18px 0 0;
        color:rgba(255,255,255,.58);
        font-size:.92rem;
      }

      /* sparkles layer */
      .sparkles{
        position:absolute;
        inset:0;
        pointer-events:none;
        z-index:0;
      }
      .spark{
        position:absolute;
        left:var(--sx);
        top:var(--sy);
        font-size:var(--ss);
        opacity:0;
        transform: translateY(8px) scale(.9);
        animation: pop 1.9s ease-in-out infinite;
        filter: drop-shadow(0 10px 20px rgba(255,122,200,0.12));
      }
      @keyframes pop{
        0%{opacity:0; transform: translateY(10px) scale(.85)}
        30%{opacity:.95; transform: translateY(0) scale(1)}
        70%{opacity:.65}
        100%{opacity:0; transform: translateY(-10px) scale(.9)}
      }

      @media (min-width:560px){ .btn{min-width:250px} }
      @media (prefers-reduced-motion: reduce){
        *{animation:none!important;transition:none!important}
      }
    </style>
  </head>

  <body>
    <canvas id="fw" aria-hidden="true"></canvas>
    <div class="hearts" aria-hidden="true" id="hearts"></div>

    <main class="wrap">
      <section class="card" aria-label="Valentine invitation">
        <div class="sparkles" id="sparkles" aria-hidden="true"></div>

        <div class="top-emojis" aria-hidden="true">üíò üíñ üíû üíó üíì</div>
        <div class="mini"><span class="dot"></span> a tiny question with a big smile üß∏</div>

        <h1>{herName}, will you be my Valentine?</h1>

        <p class="msg">
          I don‚Äôt need anything grand ‚Äî I just want time with you.
          A little more laughter, a little more closeness, and a lot more <b>us</b>.
          If your heart says yes‚Ä¶ I‚Äôm right here. ü´∂
        </p>

        <div class="couple" role="img" aria-label="Initials of us both with a heart">
          <div class="avatar me" aria-label="Me">{myInitial}</div>
          <div class="heart" aria-hidden="true">‚ù§</div>
          <div class="avatar you" aria-label="You">{herInitial}</div>
        </div>

        <div class="teddy-row" aria-hidden="true">üß∏üíó üß∏üíó üß∏</div>

        <div class="hug" id="hug" aria-hidden="true">
          <span class="spark">‚ú®</span><span class="bear">üß∏</span><span class="heart2">üíñ</span><span class="bear">üß∏</span><span class="spark">‚ú®</span>
        </div>

        <div class="actions" aria-label="Response buttons">
          <a class="btn btn-yes" id="yesBtn" href={yesLink}>
            Yes, I will <span aria-hidden="true">üéÜ</span>
          </a>
        </div>

        <!-- Floating NO (unclickable) -->
        <button class="btn btn-no" id="noBtn" type="button" aria-disabled="true" tabindex="-1">
          No, not this time
        </button>

        <p class="foot">P.S. If you say yes, I owe you a proper date. üß∏üíñ</p>
      </section>
    </main>

    <script>
      // floating hearts background
      const heartsHost = document.getElementById("hearts");
      const heartChars = ["‚ù§","‚ô•","‚ô°","üíñ","‚ú®","üíò"];
      for (let i = 0; i < 18; i++) {
        const s = document.createElement("span");
        s.textContent = heartChars[i % heartChars.length];
        s.style.setProperty("--x", (Math.random() * 100) + "vw");
        s.style.setProperty("--y", (Math.random() * 100) + "vh");
        s.style.setProperty("--s", (14 + Math.random() * 22) + "px");
        s.style.setProperty("--d", (4.8 + Math.random() * 4.2) + "s");
        heartsHost.appendChild(s);
      }

      // sparkles inside card
      const sparkHost = document.getElementById("sparkles");
      const sparkChars = ["‚ú®","üíñ","‚ãÜ","‚ú¶","‚úß"];
      for (let i = 0; i < 10; i++) {
        const sp = document.createElement("div");
        sp.className = "spark";
        sp.textContent = sparkChars[i % sparkChars.length];
        sp.style.setProperty("--sx", (10 + Math.random() * 80) + "%");
        sp.style.setProperty("--sy", (18 + Math.random() * 58) + "%");
        sp.style.setProperty("--ss", (14 + Math.random() * 16) + "px");
        sp.style.animationDelay = (Math.random() * 2.4) + "s";
        sparkHost.appendChild(sp);
      }

      // Floating "No" (DVD bounce inside card)
      const noBtn = document.getElementById("noBtn");
      const card = document.querySelector(".card");

      let vx = 1.6, vy = 1.25;
      let px = 18, py = 18;
      let floatRAF = null;

      function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

      function step(){
        const rect = card.getBoundingClientRect();
        const b = noBtn.getBoundingClientRect();

        // width/height of card coordinate system
        const w = rect.width;
        const h = rect.height;

        // button size (use actual)
        const bw = b.width;
        const bh = b.height;

        const pad = 12;
        const maxX = Math.max(pad, w - bw - pad);
        const maxY = Math.max(pad, h - bh - pad);

        px += vx;
        py += vy;

        if (px <= pad || px >= maxX) vx *= -1;
        if (py <= pad || py >= maxY) vy *= -1;

        px = clamp(px, pad, maxX);
        py = clamp(py, pad, maxY);

        noBtn.style.left = px + "px";
        noBtn.style.top = py + "px";

        floatRAF = requestAnimationFrame(step);
      }

      // start after layout
      window.addEventListener("load", () => {
        // random initial position
        const rect = card.getBoundingClientRect();
        px = 16 + Math.random() * (rect.width * 0.45);
        py = 16 + Math.random() * (rect.height * 0.35);
        step();
      });

      // also ‚Äúrun away‚Äù if cursor gets close (adds playfulness)
      window.addEventListener("mousemove", (e) => {
        const r = noBtn.getBoundingClientRect();
        const dx = e.clientX - (r.left + r.width / 2);
        const dy = e.clientY - (r.top + r.height / 2);
        const dist = Math.sqrt(dx*dx + dy*dy);
        if (dist < 140) {
          // quick nudge away
          vx = (dx > 0 ? -1 : 1) * (1.8 + Math.random()*0.8);
          vy = (dy > 0 ? -1 : 1) * (1.4 + Math.random()*0.7);
        }
      });

      // Fireworks on YES + teddy hug reveal
      const yesBtn = document.getElementById("yesBtn");
      const hug = document.getElementById("hug");

      const canvas = document.getElementById("fw");
      const ctx = canvas.getContext("2d");
      let W = 0, H = 0, dpr = 1;
      let particles = [];
      let raf = null;

      function resize() {
        dpr = window.devicePixelRatio || 1;
        W = canvas.width = Math.floor(window.innerWidth * dpr);
        H = canvas.height = Math.floor(window.innerHeight * dpr);
        canvas.style.width = window.innerWidth + "px";
        canvas.style.height = window.innerHeight + "px";
      }
      window.addEventListener("resize", resize);
      resize();

      function burst(x, y) {
        const count = 220;
        for (let i = 0; i < count; i++) {
          const a = Math.random() * Math.PI * 2;
          const sp = 3 + Math.random() * 6.5;
          particles.push({
            x, y,
            vx: Math.cos(a) * sp,
            vy: Math.sin(a) * sp,
            g: 0.10 + Math.random() * 0.08,
            life: 80 + Math.random() * 40,
            size: 1.2 + Math.random() * 2.8,
            hue: Math.random() * 360
          });
        }
      }

      function tick() {
        ctx.clearRect(0, 0, W, H);

        particles = particles.filter(p => p.life > 0);
        for (const p of particles) {
          p.life -= 1;
          p.vy += p.g;
          p.x += p.vx;
          p.y += p.vy;

          const alpha = Math.max(0, Math.min(1, p.life / 110));
          ctx.globalAlpha = alpha;
          ctx.fillStyle = `hsl(${p.hue}, 95%, 70%)`;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size * dpr, 0, Math.PI * 2);
          ctx.fill();
        }
        ctx.globalAlpha = 1;

        if (particles.length > 0) raf = requestAnimationFrame(tick);
        else {
          cancelAnimationFrame(raf);
          raf = null;
          ctx.clearRect(0, 0, W, H);
        }
      }

      yesBtn.addEventListener("click", (e) => {
        e.preventDefault();
        hug.classList.add("show");

        const r = yesBtn.getBoundingClientRect();
        const x = (r.left + r.width / 2) * dpr;
        const y = (r.top + r.height / 2) * dpr;

        burst(x, y);
        burst(W * 0.35, H * 0.34);
        burst(W * 0.65, H * 0.30);

        if (!raf) tick();

        yesBtn.style.filter = "brightness(1.08)";
        setTimeout(() => (yesBtn.style.filter = ""), 400);

        setTimeout(() => {
          window.location.href = yesBtn.getAttribute("href");
        }, 800);
      });
    </script>
  </body>
</html>
